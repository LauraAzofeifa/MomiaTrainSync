@{
    ViewData["Title"] = "Workout Library";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<style>
    .trainer-title {
        font-weight: 700;
        color: #264653;
        margin-bottom: 2rem;
    }

    .btn-action {
        margin-right: 0.4rem;
    }

    .table thead {
        background-color: #e0f0f0;
        color: #264653;
        font-weight: 600;
    }

    .filter-row input {
        width: 100%;
        padding: 3px;
        border-radius: 0.3rem;
        border: 1px solid #ccc;
        font-size: 0.9rem;
    }
</style>

<div class="container-fluid px-3 px-md-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="trainer-title">Workout Library</h2>
        <button class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#modalAgregar">
            <i class="fas fa-plus me-1"></i>Agregar Entrenamiento
        </button>
    </div>

    <div class="table-responsive">
        <table id="tablaEntrenamientos" class="table table-bordered table-hover align-middle">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Nombre</th>
                    <th>Duración</th>
                    <th>Objetivo</th>
                    <th class="text-center">Acciones</th>
                </tr>
                <tr class="filter-row">
                    <th></th>
                    <th><input type="text" placeholder="Filtrar por nombre" /></th>
                    <th><input type="text" placeholder="Filtrar por duración" /></th>
                    <th><input type="text" placeholder="Filtrar por objetivo" /></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Intervalos VO2Max</td>
                    <td>45 min</td>
                    <td>Mejorar capacidad aeróbica</td>
                    <td class="text-center">
                        <a class="btn btn-sm btn-secondary btn-action" data-bs-toggle="modal" data-bs-target="#modalDetalle"><i class="fas fa-eye"></i></a>
                        <a class="btn btn-sm btn-primary btn-action" data-bs-toggle="modal" data-bs-target="#modalEditar"><i class="fas fa-edit"></i></a>
                        <a class="btn btn-sm btn-info btn-action" data-bs-toggle="modal" data-bs-target="#modalClonar"><i class="fas fa-clone"></i></a>
                        <a class="btn btn-sm btn-warning btn-action" data-bs-toggle="modal" data-bs-target="#modalAsignar"><i class="fas fa-user-plus"></i></a>
                        <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#modalEliminar"><i class="fas fa-trash-alt"></i></button>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Tempo Run</td>
                    <td>40 min</td>
                    <td>Mejorar umbral de lactato</td>
                    <td class="text-center">
                        <a class="btn btn-sm btn-secondary btn-action" data-bs-toggle="modal" data-bs-target="#modalDetalle"><i class="fas fa-eye"></i></a>
                        <a class="btn btn-sm btn-primary btn-action" data-bs-toggle="modal" data-bs-target="#modalEditar"><i class="fas fa-edit"></i></a>
                        <a class="btn btn-sm btn-info btn-action" data-bs-toggle="modal" data-bs-target="#modalClonar"><i class="fas fa-clone"></i></a>
                        <a class="btn btn-sm btn-warning btn-action" data-bs-toggle="modal" data-bs-target="#modalAsignar"><i class="fas fa-user-plus"></i></a>
                        <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#modalEliminar"><i class="fas fa-trash-alt"></i></button>
                    </td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Series en Cuestas</td>
                    <td>30 min</td>
                    <td>Desarrollar fuerza muscular</td>
                    <td class="text-center">
                        <a class="btn btn-sm btn-secondary btn-action" data-bs-toggle="modal" data-bs-target="#modalDetalle"><i class="fas fa-eye"></i></a>
                        <a class="btn btn-sm btn-primary btn-action" data-bs-toggle="modal" data-bs-target="#modalEditar"><i class="fas fa-edit"></i></a>
                        <a class="btn btn-sm btn-info btn-action" data-bs-toggle="modal" data-bs-target="#modalClonar"><i class="fas fa-clone"></i></a>
                        <a class="btn btn-sm btn-warning btn-action" data-bs-toggle="modal" data-bs-target="#modalAsignar"><i class="fas fa-user-plus"></i></a>
                        <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#modalEliminar"><i class="fas fa-trash-alt"></i></button>
                    </td>
                </tr>

            </tbody>
        </table>
    </div>
</div>

<!-- MODALES -->
<!-- Agregar/Editar -->
<div class="modal fade" id="modalAgregar" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Agregar Entrenamiento</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3"><label class="form-label">Nombre</label><input type="text" class="form-control" /></div>
                    <div class="mb-3"><label class="form-label">Duración</label><input type="text" class="form-control" /></div>
                    <div class="mb-3"><label class="form-label">Objetivo</label><input type="text" class="form-control" /></div>
                    <div class="mb-3"><label class="form-label">Detalle</label><textarea class="form-control" rows="4"></textarea></div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button class="btn btn-primary">Guardar</button>
            </div>
        </div>
    </div>
</div>

<!-- Detalle -->
<div class="modal fade" id="modalDetalle" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Detalles del Entrenamiento</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p><strong>Nombre:</strong> Intervalos VO2Max</p>
                <p><strong>Duración:</strong> 45 min</p>
                <p><strong>Objetivo:</strong> Mejorar capacidad aeróbica</p>
                <p><strong>Detalle:</strong> Calentamiento 10 min, 5x3 min a 90% esfuerzo, enfriamiento 10 min.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<!-- Editar -->
<div class="modal fade" id="modalEditar" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Editar Entrenamiento</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3"><label class="form-label">Nombre</label><input type="text" class="form-control" value="Intervalos VO2Max" /></div>
                    <div class="mb-3"><label class="form-label">Duración</label><input type="text" class="form-control" value="45 min" /></div>
                    <div class="mb-3"><label class="form-label">Objetivo</label><input type="text" class="form-control" value="Mejorar capacidad aeróbica" /></div>
                    <div class="mb-3"><label class="form-label">Detalle</label><textarea class="form-control" rows="4">Calentamiento 10 min, 5x3 min a 90% esfuerzo...</textarea></div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button class="btn btn-primary">Guardar Cambios</button>
            </div>
        </div>
    </div>
</div>

<!-- Clonar -->
<div class="modal fade" id="modalClonar" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header"><h5 class="modal-title">Clonar Entrenamiento</h5><button class="btn-close" data-bs-dismiss="modal"></button></div>
            <div class="modal-body">¿Desea clonar este entrenamiento para crear una nueva versión editable?</div>
            <div class="modal-footer"><button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button class="btn btn-primary">Clonar</button></div>
        </div>
    </div>
</div>

<!-- Asignar -->
<div class="modal fade" id="modalAsignar" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header"><h5 class="modal-title">Asignar a Atleta</h5><button class="btn-close" data-bs-dismiss="modal"></button></div>
            <div class="modal-body">
                <form>
                    <label class="form-label">Seleccione el Atleta</label>
                    <select class="form-select">
                        <option selected disabled>Seleccione un atleta</option>
                        <option>Laura Azofeifa</option>
                        <option>Ernesto Salazar</option>
                        <option>Karen Méndez</option>
                    </select>
                </form>
            </div>
            <div class="modal-footer"><button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button class="btn btn-primary">Asignar</button></div>
        </div>
    </div>
</div>

<!-- Eliminar -->
<div class="modal fade" id="modalEliminar" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header"><h5 class="modal-title">Eliminar Entrenamiento</h5><button class="btn-close" data-bs-dismiss="modal"></button></div>
            <div class="modal-body">¿Está seguro que desea eliminar este entrenamiento?</div>
            <div class="modal-footer"><button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button><button class="btn btn-danger">Eliminar</button></div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            var table = $('#tablaEntrenamientos').DataTable({
                orderCellsTop: true,
                fixedHeader: true,
                order: [[0, 'asc']],
                language: {
                    search: "Buscar:",
                    lengthMenu: "Mostrar _MENU_ registros",
                    info: "Mostrando _START_ a _END_ de _TOTAL_",
                    paginate: { next: "Siguiente", previous: "Anterior" },
                    zeroRecords: "No hay entrenamientos",
                    infoEmpty: "Mostrando 0",
                    infoFiltered: "(filtrado de _MAX_ total)"
                }
            });

            $('#tablaEntrenamientos thead tr.filter-row input').on('keyup change', function () {
                var colIndex = $(this).parent().index();
                table.column(colIndex).search(this.value).draw();
            });
        });
    </script>
}
